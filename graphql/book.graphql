# Object Type
type Book {
    id: ID!
    cover: String!
    title: String!
    bookCode: String!
    author: String!
    inStock: Int!
    courses: [Course!]! @belongsToMany
    booksRecords: [BookRecord!] @hasMany
    createdAt: DateTime!
    updatedAt: DateTime!
}

# Input Type
input BookInput {
    id: ID @eq
    cover: String
    title: String
    bookCode: String
    author: String
    inStock: Int
    courses: CourseOperations
    booksRecords: BookRecordOperations
}

# Single Nested Mutations
input BookOperation {
    create: BookInput!
    connect: ID!
    update: BookInput!
    upsert: BookInput!
    delete: ID!
    disconnect: ID!
}

# List Nested Mutations
input BookOperations {
    create: [BookInput!]
    connect: [ID!]
    update: [BookInput!]
    upsert: [BookInput!]
    sync: [ID!]
    syncWithoutDetaching: [ID!]
    delete: [ID!]
    disconnect: [ID!]
}

# Query
extend type Query {
    book(id: Int! @eq): Book @find
    books(
        title: String @where(operator: "like")
        bookCode: String @eq
        author: String @where(operator: "%LIKE%")
        inStock: Int @eq
        courses: [Int!] @in(key: "book_course.")
    ): [Book!]! @all
}

# Mutation
extend type Mutation {
    createBook(input: BookInput! @spread): Book @create
    updateBook(input: BookInput! @spread): Book @update
    upsertBook(input: BookInput! @spread): Book @upsert
    deleteBook(id: ID! @eq): Book @delete
}
